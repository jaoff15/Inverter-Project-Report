\section{Hardware}
\label{sec:hardware}
The section goes through the design of the hardware for the motor driver. It includes a walk-through of the provided material for the project which includes an encoder interface.
Then the analog board is designed which handles all analog signals. The power board handling high power components and driver board handling driver signals are designed and then a combined section about how they fit together.
% The power board includes heat dissipation. how the physical construction of the inverter would like.


\subsection{Motor specifications}
The motor used in the go kart is a \textit{Motenergy ME1117 PMAC Motor}. Its parameters can be seen in table \ref{Motor_parameters_list}. 

\begin{table} [H]
    \centering
    \begin{tabular}{|l|l|} \cline{1-2}
        Pole pair                   & $4\ pairs\ (8\ poles)$        \\ \cline{1-2}
        Maximum rotational speed    & $5000 RPM$                    \\ \cline{1-2}
        Voltage rating              & $0-76 V$                      \\ \cline{1-2}
        Continuous current          & $100\ A$                      \\ \cline{1-2}
        Peak Current for 1 min      & $300\ A$                      \\ \cline{1-2}
        Torque constant             & $0.13 Nm/A$                   \\ \cline{1-2}
        Phase to Phase Resistance   & $0.013\ohm$                   \\ \cline{1-2}
        Phase to Phase Inductance   & $0.1$ mH                      \\ \cline{1-2}
        Armature Inertia            & $52\ kg/cm^2$                 \\ \cline{1-2}
    \end{tabular} \\
    \caption{Motor parameters specifying the motor \textit{Motenergy ME1117 PMAC} \cite{Motor_Parameters}.}
    \label{Motor_parameters_list}
\end{table} 


% All of these specifications are what makes up the motor, and will be written into the model motor. It will also be used in order to calculate framework of the controller. Before diving in to the specifics of how and why, certain methods is used. A quick overview of the base model, will help visualize how the final model was made.\\


\subsection{Main interface board}
Part of the material provided to start the project is the main interface board. The board contains a range of smaller circuits and acts as the interface between the hardware and the embedded controller. 

The circuits include a pre-charge circuit, high motor temperature detection circuit, battery voltage measurement circuit, relay control, encoder interface, interface to buttons and switches and some voltage references and supplies. 

The section contains a short introduction to the encoder interface, all other modules will be references when they are used.



\subsubsection{Encoder}

On the motor is an \textit{AM256} magnetic 8 bit encoder mounted. The encoder is supplied from the main interface board and the signals are routed from the encoder to the Zybo. 

The decoding and translation of the encoder signal are done in the Zybo which is discussed in section \ref{sec:encoder}.



\input{sections/hardware/analogboard/Analog_Interface_Board.tex}

\subsection{Power board}
The inverter is divided into two PCB's, one for the high power part, the Power board and one for the driver part, the Driver board. The following section describes how the Power board for the inverters are designed and what considerations have been made. It will describe what kind of PCB and which components have been used and why. The layout of the PCBs will also be described and what considerations has been made. \\
\input{sections/hardware/powerboard/Power_Board.tex}
% \input{sections/hardware/powerboard/design.tex}
% \input{sections/hardware/powerboard/implementation.tex}

\subsection{Driver board}
The section describes the theoretical background, the design considerations taken and the implementation of the driver circuit and the PCB.
\input{sections/hardware/driverboard/analysis.tex}
\input{sections/hardware/driverboard/design.tex}

\subsection{Power and Driver board layout}
This section describes the design and layout considerations for both boards.
\input{sections/hardware/driverboard/layout.tex}

\subsection*{Subconclusion}
An analog interface that scales the current transducer and torque sensors signals has been made and a PCB produced. 
A power board for each phase is designed with four SMD MOSFET's used per phase which is made possible by the PCB's being of aluminum. 
A driver board is then designed to sit on top of the power board and switch the transistors. The board has cut-outs for the DC-link capacitors.

Component lists for all boards, for the heat sink and for additional material can be found in appendix \ref{app:component_list}. 


