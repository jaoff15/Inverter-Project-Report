\section{Control}
\label{sec:control}

% The control will be done with vector control also known as field orientated control (FOC) where the motor currents are transformed from three-phase AC signals to a single vector in a rotating dp-frame with a Clarke and a Park transformation. The controller is placed in the dq-frame and its output signals are converted from a rotating vector in the dq-frame back to a signal for each inverter phase.
The section will go through which control type has been chosen, how it works and how it is used. Then the motor model is setup and explained and lastly the motor controller is designed.

\input{sections/control/control_sections/introduction.tex}

\input{sections/control/control_sections/clarke_park_transformations.tex}

\input{sections/control/control_sections/motor_model.tex}

\input{sections/control/control_sections/control_system.tex}

\input{sections/control/control_sections/controller.tex}

\input{sections/control/control_sections/simulations.tex}

\subsection*{Subconclusion}
A model of the PMSM is made in the dq-frame, and it is controlled with field orientated control. For converting the three rotating phases going into the motor, to a d- and q-vector in a rotating frame, the Clarke and Park transformation is used. A PI-controller is used to control the d- and q-currents in the motor. Some minor problems have resulted in the model not working as expected. 

