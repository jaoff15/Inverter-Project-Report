\section{Discussion}
\label{sec:discussion}
\rework{Discuss results}
 

\rework{What has been made? How do the results compare to theory?}
A crucial factor of the project, is that testing wasn't an option due to time constrains. This leads to conclusion that theoretically the project should work, but not having test data to back it up. It could have lead to better understanding of 
have the current setup, would behave to when implementing it in a physical environment. This could give information about what factors needed changing to optimize the motor driver. \\ 

\subsection{Components}
\rework{Are there any problems with the component choice?}
\rework{What would be something to look for in other components?}
When it come to any component the correct one isn't picked on first try. The pick for the transistor and the gate driver, was the fourth suggestion and need to be picked in order to continue work on the PCB design. Since the construction and testing wasn't completed, more time could have been allocated, if an earlier decision had been made. \\

To more precisely comment, a better way of compare the different components would have given a better result. Such a comparison could have been done in a Matlab script, that runs the choices through the same calculations, and puts out the important factors up against each others. \\

\subsection{Power board}
Placing bulk capacitors on the busbars is pretty difficult without burning the caps and reflowing the whole assembly. It should be substituted with a more prototype-friendly solution. We still have to find out if the capacitance built in is enough to smooth out everything it is supposed to.

\subsection{Driver board}
Due to miscommunication, only one of the split gate resistors was placed in the schematic. The ones closer to the gate should be placed, too. Using an SMD diode could also lead to a better layout. We wanted to spare money by usng what we have in the component stock.

\subsection{Control}
\rework{Are there any problems with the control?}
\rework{If yes, how could they be fixed?}

\subsection{Thermal characteristics}
\rework{How does the thermal analysis look? Could something be made better?}


\subsection{Construction}
% Mechanical problems. Construction problems. Others?
Constructing the inverter in the intended way might turn out difficult. While mounting the bus bars across all three phase PCB's and mounting the capacitors directly on top of the bus bar might be a good idea electrically, it can turn out to be near impossible in practice.

The bus bars are made of solid copper which have a high thermal conductivity and therefore soldering anything directly to the bars is difficult. Heating up all the PCB's and the bus bar in an oven or heating plate is the only option. 
Getting all phase PCB's to align and solder correctly to the bus bars requires high precision and it might not be feasibly to use the same PCB's for a round two if something goes wrong.
On top of mounting the bus bars to the PCB's the capacitors has to be mounted at the same time. 

A compromise with a bit worse electrical characteristics but better construction might need to be used.

\subsection{Embedded software}
\rework{Is there any problems or missing features in the embedded software. What would be some potential things to correct}

\subsubsection{Minimizing the dead time in the PWM module}

The dead time between the high-side and low-side PWM's are $\sim 53$ times longer than the turn off time of the transistors used. The dead time is mainly limited by the resolution of the internal counter in the PWM module. By increasing the counter limits to $1000$ instead of $100$ the resolution would become $10$ times higher. The dead time resolution would also become $10$ times higher which would bring the minimum dead time down to $400ns$ only $\sim 5.3$ times larger than necessary.


\subsubsection{Quantifying the benefit from the linear interpolation}
The linear interpolation has compromises and it is difficult to quantify the expected benefit from having it. As shown in section \ref{sec:linear_interpolation} a more precise rotor angle can be achieved for speeds less than $1185RPM$ for moments with low to no acceleration or deceleration. The error caused by acceleration and deceleration is not analyzed, only a static simulation has been made. To precisely determine how big of an advantage or disadvantage the interpolation can have in a real scenario, the algorithm would need to be dynamically tested.




 
 